<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dirac & Weyl Algebra Explorer</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f6; color: #333; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        .controls { display: grid; grid-template-rows: 1fr 1fr; gap: 20px; margin-bottom: 30px; background: #ecf0f1; padding: 20px; border-radius: 8px; }
        .panel { border: 1px solid #ddd; padding: 15px; border-radius: 8px; }
        .matrix-container { display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
        .matrix-box { background: #fff; border: 2px solid #3498db; padding: 15px; border-radius: 8px; min-width: 300px; text-align: center; }
        select, button { padding: 10px; font-size: 16px; border-radius: 5px; border: 1px solid #bdc3c7; width: 100%; cursor: pointer; }
        button { background: #3498db; color: white; border: none; transition: 0.3s; }
        button:hover { background: #2980b9; }
        .info { font-size: 0.9em; color: #7f8c8d; margin-top: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        td { border: 1px solid #eee; padding: 5px; text-align: center; font-family: 'Courier New', Courier, monospace; }
    </style>
</head>
<body>

<div class="container">
    <h1>Dirac & Weyl Algebra Explorer</h1>
    <p style="text-align:center">Explore the 16 basis elements and Spinor transformations.</p>
    <div style="display: flex; gap: 20px">
    <div class="controls">
        <div class="panel">
            <h3>1. Select Basis Element (\(\Gamma\))</h3>
            <select id="basisSelect" onchange="update()">
                <optgroup label="Scalar">
                    <option value="I">Identity (1)</option>
                </optgroup>
                <optgroup label="Vectors">
                    <option value="G0">γ⁰ (Time-like)</option>
                    <option value="G1">γ¹ (x-direction)</option>
                    <option value="G2">γ² (y-direction)</option>
                    <option value="G3">γ³ (z-direction)</option>
                </optgroup>
                <optgroup label="Bivectors (Rotations/Boosts)">
                    <option value="G01">γ⁰γ¹ (Boost x)</option>
                    <option value="G02">γ⁰γ² (Boost y)</option>
                    <option value="G03">γ⁰γ³ (Boost z)</option>
                    <option value="G23">γ²γ³ (Rotation x)</option>
                    <option value="G12">γ¹γ² (Rotation z)</option>
                </optgroup>
                <optgroup label="Pseudoscalar">
                    <option value="G5">γ⁵ (Chirality)</option>
                </optgroup>
            </select>
            <div class="info">Basis elements generate the full 16-dimensional \(\mathbb{C}\ell_{1,3}\) algebra.</div>
        </div>

        <div class="panel">
            <h3>2. Apply Transformation</h3>
            <button onclick="applyTransformation('P')">Space Inversion (Parity P)</button>
            <button onclick="applyTransformation('C')" style="margin-top:10px; background:#e67e22">Charge Conjugation (C)</button>
            <div class="info">Note: C is anti-linear (includes complex conjugation).</div>
        </div>
    </div>

    <div class="matrix-container">
        <div class="matrix-box">
            <h3>Dirac Representation</h3>
            <div id="diracMatrixDisplay"></div>
        </div>
        <div class="matrix-box">
            <h3>Weyl (Chiral) Representation</h3>
            <div id="weylMatrixDisplay"></div>
        </div>
    </div>
    </div>

    <div id="mathOutput" style="margin-top:30px; padding:20px; background:#f9f9f9; border-radius:8px;">
        </div>
</div>

<script>
    // --- Matrix Math Engine ---
    const I = [[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];
    const Z = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];

    // Pauli Matrices
    const s0 = [[1,0],[0,1]], s1 = [[0,1],[1,0]], s2 = [[0,'-i'],['i',0]], s3 = [[1,0],[0,-1]];

    function complexMul(a, b) {
        if (typeof a === 'number' && typeof b === 'number') return a * b;
        // Simple symbolic handler for 1, -1, i, -i
        const map = {'i*i':-1, 'i*-i':1, '-i*i':1, 'i*1':'i', 'i*-1':'-i', '-i*1':'-i'};
        if (a === 0 || b === 0) return 0;
        if (a === 1) return b;
        if (b === 1) return a;
        if (a === -1) return (b.toString().startsWith('-')) ? b.toString().slice(1) : '-' + b;
        let res = `${a}*${b}`;
        return map[res] || res;
    }

    function matMul(A, B) {
        let C = Array(4).fill(0).map(() => Array(4).fill(0));
        for(let i=0; i<4; i++)
            for(let j=0; j<4; j++)
                for(let k=0; k<4; k++) {
                    let prod = complexMul(A[i][k], B[k][j]);
                    if (C[i][j] === 0) C[i][j] = prod;
                    else if (prod !== 0) C[i][j] = `${C[i][j]} + ${prod}`;
                }
        return C;
    }

    // Dirac Gammas
    const DG = {
        G0: [[1,0,0,0],[0,1,0,0],[0,0,-1,0],[0,0,0,-1]],
        G1: [[0,0,0,1],[0,0,1,0],[0,-1,0,0],[-1,0,0,0]],
        G2: [[0,0,0,'-i'],[0,0,'i',0],[0,'i',0,0],['-i',0,0,0]],
        G3: [[0,0,1,0],[0,0,0,-1],[-1,0,0,0],[0,1,0,0]],
        G5: [[0,0,1,0],[0,0,0,1],[1,0,0,0],[0,1,0,0]]
    };

    // Weyl Gammas
    const WG = {
        G0: [[0,0,1,0],[0,0,0,1],[1,0,0,0],[0,1,0,0]],
        G1: [[0,0,0,-1],[0,0,-1,0],[0,1,0,0],[1,0,0,0]],
        G2: [[0,0,0,'i'],[0,0,'-i',0],[0,'-i',0,0],['i',0,0,0]],
        G3: [[0,0,-1,0],[0,0,0,1],[1,0,0,0],[0,-1,0,0]],
        G5: [[-1,0,0,0],[0,-1,0,0],[0,0,1,0],[0,0,0,1]]
    };

    function renderMatrix(mat, elementId) {
        let html = "<table>";
        for(let i=0; i<4; i++) {
            html += "<tr>";
            for(let j=0; j<4; j++) {
                let val = mat[i][j];
                if (val === 'i') val = '<i>i</i>';
                if (val === '-i') val = '-<i>i</i>';
                html += `<td>${val === 0 ? '0' : val}</td>`;
            }
            html += "</tr>";
        }
        html += "</table>";
        document.getElementById(elementId).innerHTML = html;
    }

    function update() {
        const val = document.getElementById('basisSelect').value;
        let dMat, wMat;

        if (val.length === 1) { dMat = I; wMat = I; }
        else if (val.length === 2) { 
            dMat = DG[val]; wMat = WG[val]; 
        } else {
            // Bivectors e.g., G12
            let gA = val.substring(1,2), gB = val.substring(2,3);
            dMat = matMul(DG['G'+gA], DG['G'+gB]);
            wMat = matMul(WG['G'+gA], WG['G'+gB]);
        }

        renderMatrix(dMat, 'diracMatrixDisplay');
        renderMatrix(wMat, 'weylMatrixDisplay');
        
        document.getElementById('mathOutput').innerHTML = `Current Element Selected: <strong>${val}</strong>. <br>Observe the block-diagonal structure in Weyl basis for rotations/boosts compared to the Dirac basis.`;
    }

    function applyTransformation(type) {
        if (type === 'P') {
            alert("Parity Applied: In Weyl Basis, this swaps the diagonal blocks (Left ↔ Right). In Dirac Basis, it multiplies the lower components by -1.");
        } else if (type === 'C') {
            alert("Charge Conjugation Applied: Look at the off-diagonal entries. Notice how C maps particles to their antiparticle ideals.");
        }
    }

    window.onload = update;
</script>

</body>
</html>